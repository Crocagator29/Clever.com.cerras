<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The best revision website ever!">
    <!-- Google tag (gtag.js) yay :D -->
    <link rel="shortcut icon" id="favi" href="">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KW15Q1QG97"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-KW15Q1QG97');

      function LoadData(){
          var TitleData = localStorage.getItem("Title");
          var FaviData = localStorage.getItem("Favi");
          console.log("Loaded title `" + TitleData  + "` with icon `" + "/" + FaviData + "`");
          if (TitleData === null) {
          document.title = "JustStudy";
          document.querySelector("link[rel='shortcut icon']").href = '/assets/img/favicon.ico';
          }
          else {
              document.title = TitleData;
              document.querySelector("link[rel='shortcut icon']").href = "/" + FaviData;
          }
          
      };
      document.addEventListener('keydown', function(event) {
        if (!detecting) {
          event.preventDefault();
          let input = "";
          const keys = [];
          if (event.ctrlKey) keys.push('Ctrl');
          if (event.altKey) keys.push('Alt');
          if (event.shiftKey) keys.push('Shift');
          if (event.metaKey) keys.push('Meta');
          keys.push(event.key);
          input = keys.join('+');
          const urls = [
              "https://senecalearning.com/",
              "https://www.sparxmaths.com",
              "https://www.tassomai.com"
          ]
          console.log(input);
          console.log(input == localStorage.getItem("panickey"));
          if (input == localStorage.getItem("panickey")) {
              if (localStorage.getItem("Title") == "Seneca - Learn 2x Faster") {
                  window.location.href = urls[0];   
              } if (localStorage.getItem("Title") == "Sparx Maths - Home"){
                  window.location.href = urls[1];
              } if (localStorage.getItem("Title") == "Tassomai"){
                  window.location.href = urls[2];
              } if (localStorage.getItem("Title") == "JustStudy"){
                  const randomIndex = Math.floor(Math.random() * 3);
                  console.log(randomIndex);
                  window.location.href = urls[randomIndex];
              }
          }
      }
    });
    </script>
    <script src="assets/js/dontsavecookies.js"></script>

    <!-- Get the Comfortaa font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa&display=swap" rel="stylesheet">

    <!-- more images -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="assets/css/main.css">

  </head>
  
  <body onload="LoadData()">
    
    <!-- start of what i added -->

    <div class="toast-container position-fixed  text-white bottom-0 end-0 p-3">
        <div id="welcomeToast" class="toast Not_color_bottom" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="toast-header Not_color_top">
            <i class="fa fa-bell white-text" aria-hidden="true"></i>
            <strong class="me-auto white-text">&nbsp;&nbsp;&nbsp;Welcome!</strong>
            <small></small>
            <button type="button" class="btn-close white-bg" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
          <div class="toast-body">
           Welcome to JustStudy! Definitely a study website. Enjoy your time here!
          </div>
        </div>
    </div>

    <!-- BEGIN Notify Scripts -->
    <script>

    function updateToastText(id, text) {
      document.getElementById(id).innerText = text;
    };

    if (localStorage.getItem('visited')) {
      console.log("wb");
    } else {
      localStorage.setItem('visited', true);
      document.addEventListener("DOMContentLoaded", () => {
          const welcomeToast = bootstrap.Toast.getOrCreateInstance(document.getElementById("welcomeToast"));
          TabCloak('JustStudy','assets/img/favicon.ico' , 'JustStudy CE' )
          localStorage.setItem("panickey", "Alt+`");
          welcomeToast.show()
      });
    };
    </script>
    <!-- END Notify Scripts -->

    <script>
        document.addEventListener("DOMContentLoaded", () => {
          document.getElementById('settings-box').style.display = 'none';
          document.getElementById('News').style.display = 'none';
          document.getElementById('fade-under-settings').style.display = 'none';
       })
    </script>
    <!-- for the sneaky will here is what i added this update. it was supprisingly easy-->
      <div class="settings-box setting scrollable" style="text-align: center;" id="settings-box">
        <h2 class="white-text" style="text-align: center;">Settings / apps</h2> 
        <div class="setting">
            <center>
            <hr class="rounded">
            <h3 class="white-text"style="text-align: center;"> Page Options </h3>
            <div class="dropdown" id="TabCloakOption" style="width: 20vw;">
                <button class="btn btn-warning dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="SettingDropdown">
                  Tab Cloaker - JustStudy - CE
                </button>
                <ul class="dropdown-menu dropdown-menu-dark">
                  <li><a class="dropdown-item" onclick="TabCloak('JustStudy','assets/img/favicon.ico' , 'JustStudy CE' )">JustStudy CE</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item"   onclick="TabCloak('Seneca - Learn 2x Faster','assets/img/TabCloak/Seneca.ico' , 'Seneca' )">Seneca</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item"   onclick="TabCloak('Sparx Maths - Home', 'assets/img/TabCloak/Sparx.png', 'Sparx Maths ')">Sparx</a></li>
                  <li><hr class="dropdown-divider""></li>
                  <li><a class="dropdown-item"   onclick="TabCloak('Tassomai', 'assets/img/TabCloak/Tassomai.ico' , 'Tassomai')">Tassomai</a></li>
                </ul>
              </div>
              <hr class="rounded">
              <h3 class="white-text"style="text-align: center;"> bootstrapper </h3>
               
              <div class="mb-3 outline-warning">
                <label for="basic-url" class="form-label">Url</label>
                <div class="input-group">
                  <span class="input-group-text" id="basic-addon3">https://</span>
                  <input type="text" class="form-control" id="UrlBt" aria-describedby="basic-addon3 basic-addon4">
                  <button class="btn btn-outline-warning" type="button" onclick="" id="UrlButton">Open Link</button>
                </div>
                <div class="form-text" id="basic-addon4"></div>
              </div>
              <!-- Files -->
              <label for="basic-url" class="form-label">File</label>
              <div class="input-group">
                <input type="file" class="form-control" id="FileInputBt" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
          <button class="btn btn-outline-warning" type="button" id="inputGroupFileAddon04" onmousedown="applyBootstrapFile()">Open File</button>
              </div>
              <hr class="rounded">
                <h3 class="white-text"style="text-align: center;"> Panic button keybind </h3>
                <button id="panicbutton" type="button" class="btn btn-warning">Start Detecting Keys</button>
                <input type="text" id="result" style="color: white; text-align: center;" readonly placeholder="Press a key or combination">
                <br>
              <label class="switch-container">
                <div class="switch">
                  <input type="checkbox" id="redirectswitch">
                  <span class="slider round"></span>
                </div>
                <h3 class="white-text switch-text">Redirect on Alt Tab</h3>
              </label>                           
              <h4 class="white-text"style="text-align: center; font-size: 1vw; margin-top: 0.5vw">press enter to stop input detection</h4>
              <hr class="rounded">
                <h3 class="white-text"style="text-align: center;"> Extra </h3>
                <a class="btn btn-outline-warning" href="./txeditor.html" style="text-align: left;"><i class="fa fa-code" aria-hidden="true"></i>Text Editor</a>
            </center>   
        </div>
  </div>
  <div class="mainbox" style="align-items: center;" id="iframe-box">
    <div class="mainbox-top-margin">
    </div>
    <iframe id="frame-main" src="" width="95%" height="95%"> </iframe>
</div>
  <div class="fade-under-settings" id="fade-under-settings"></div>
      <script>
        // set the alt+tab thing to work or not
        const switchElement = document.getElementById('redirectswitch');
        switchElement.addEventListener('change', () => {
          if (switchElement.checked) {
            localStorage.setItem('redirect', true);
          } else {
            localStorage.setItem('redirect', false);
          }
        });
        // url bootstrap (thanks 3kh0 :D)
        function applyBootstrapUrl() {
            const url = document.getElementById("url-target");
            const urlObj = new window.URL(window.location.href);
            var data = document.getElementById('UrlBt').value;
            var newdata = 'https://' + data;
            const win = window.open();
            win.document.body.style.margin = "0";
            win.document.body.style.height = "100vh";
            const iframe = win.document.createElement("iframe");
            iframe.style.border = "none";
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            iframe.style.margin = "0";
            iframe.referrerpolicy = "no-referrer";
            iframe.allow = "fullscreen";
            iframe.src = newdata;
            win.document.body.appendChild(iframe);
        }
        document.getElementById('UrlButton').onclick = function(){
            applyBootstrapUrl()
        }
        // file bootstrap :))) (my own)
         function applyBootstrapFile() {
             const fileInput = document.getElementById('FileInputBt').files[0]; 
             const reader = new FileReader();

             reader.onload = function (e) {
                 const data = e.target.result;
                 const newWindow = window.open();
                 newWindow.document.open();
                 newWindow.document.write(data);
                 newWindow.document.title = "about:blank";
             };
             reader.readAsText(fileInput);
            }
            // panic button thing
            const startButton = document.getElementById('panicbutton');
            const resultInput = document.getElementById('result');
            let detecting = false;

            startButton.addEventListener('click', () => {
              detecting = true;
              resultInput.value = "Listening for key presses...";
              resultInput.focus();
            });
            document.addEventListener('keydown', function(event) {
              if (detecting) {
                event.preventDefault();
                const keys = [];
                if (event.key != "Enter" ){
                  if (event.ctrlKey) keys.push('Ctrl');
                  if (event.altKey) keys.push('Alt');
                  if (event.shiftKey) keys.push('Shift');
                  if (event.metaKey) keys.push('Meta');
                  keys.push(event.key);
                  resultInput.value =keys.join('+');
                } else {
                  setpanickey(resultInput.value);
                }
            }
            });
            function setpanickey(keys){
              detecting = false;
              localStorage.setItem("panickey", keys);
              console.log(localStorage.getItem("panickey"));
            }
        document.getElementById('toggleButton').addEventListener('click', toggleMenu);
        function myFunction() {

        var checkBox = document.getElementById("myCheck");
  
        var text = document.getElementById("text");

 
        if (checkBox.checked == true){
            text.style.display = "block";
        } else {
            text.style.display = "none";
         }
        }  
        function TabCloak(selectedValue, faviconUrl, name) {
            document.getElementById("SettingDropdown").innerHTML = "TabCloaker - " + name;
            document.title = selectedValue;
            document.querySelector("link[rel='shortcut icon']").href = faviconUrl;
            localStorage.setItem("Title", selectedValue);
            localStorage.setItem("Favi", faviconUrl);
        }
    </script>
    <!-- end of what i added-->
    
     <div class="gradient" id="gradient"></div>
    <div style="display: flex; align-items: center; width: 50vw; margin: 0 auto; position: relative;">
      <a class="active" href="qa.html" style="margin: 0 auto; position: relative; right: 8vw; cursor: pointer;">
        <img src="assets/img/qna.png" style="width: 3vw; height: 3vw; position: fixed; top: 50%; transform: translate(20%,-50%);">
      </a>
      <a class="active" onclick="FeelingLucky()" style="margin: 0 auto; position: relative; right: 7vw; cursor: pointer;">
        <img src="assets/img/random.png" style="width: 3vw; height: 3vw; position: fixed; top: 50%; transform: translate(20%,-50%);">
      </a>
      <a class="active" onclick="toggleNews()" style="margin: 0 auto; position: relative; right: 6vw; cursor: pointer;">
        <img src="assets/img/news.png" style="width: 3vw; height: 3vw; position: fixed; top: 50%; transform: translate(20%,-50%);">
      </a>
      <a class="active" onclick="toggleSettings()" style="margin: 0 auto; position: relative; right: 5vw; cursor: pointer;">
        <img src="assets/img/cog.png" style="width: 4vw; height: 4vw; position: fixed;">
      </a>
      <h1 class="page-title glow" style="font-size: 4vw; color: white; margin: 0; text-align: center; flex-grow: 1; position: relative; right: 8vw; z-index: -1;">
        JustStudy
      </h1>
      <input class="topBarItems searchBar" type="text" id="search-bar" placeholder="Search">
    </div>
    
    
    

    <script>
      function handleSearch() {
      const searchTerm = document.getElementById("search-bar").value.toLowerCase();
      const gridItems = document.querySelectorAll(".griditem");
    
        gridItems.forEach(item => {
           const itemName = item.querySelector(".listing-text").textContent.toLowerCase();
           if (itemName.includes(searchTerm)) {
               item.style.display = "block";
            } else {
               item.style.display = "none";
           }
        });
      }
  
     document.getElementById("search-bar").addEventListener("input", handleSearch);
      </script>
     <!-- <center> <div class="devbox"> <h6>this aint the main site, only dev.<a href="https://metalfoxdev.codeberg.page/juststudy-site/"> Click here to go to the main one</h6> </div> </center> -->
    <script>
    function FeelingLucky() {
      fetch('assets/data/index.json')
      .then(response => response.json())
      .then(data => {
        const randomarray = data[Math.floor(Math.random() * data.length)];
        const link = randomarray["url"]
        console.log(link);
        window.location.href = link;
      })
      .catch((error) => console.error("Error:", error))
      .finally(() => {
          document.getElementById("loader").style.display = "none";
      });
}
        
    function RandomColour() {
        var colour = Math.floor(Math.random() * 6) + 1;

        if (colour == 1){
            document.getElementById("desc").style.color = '#ffda8b'
        } 
        else if (colour == 2) {
            document.getElementById("desc").style.color = '#ffa08b'
        }
        else if (colour == 3) {
            document.getElementById("desc").style.color = '#8bffa0'
        }
        else if (colour == 4) {
            document.getElementById("desc").style.color = '#eaff8b'
        }
        else if (colour == 5) {
            document.getElementById("desc").style.color = '#b0ff8b'
        }
        else if (colour == 6) {
            document.getElementById("desc").style.color = '#8bffda'
        }
    }
    document.addEventListener('DOMContentLoaded', function () {
        const animationBox = document.getElementById('desc');
        RandomColour();
        

        function startDescAnimation() {
            animationBox.classList.add('descslideout');
            animationBox.addEventListener('animationend', handleAnimationEnd, { once: true });
        }

        function handleAnimationEnd(event) {
            if (event.animationName === 'descslideout') {
                randomdesc()
                animationBox.classList.remove('descslideout');
                animationBox.classList.add('descslidein');
                animationBox.addEventListener('animationend', handleAnimationEnd, { once: true });
            } else if (event.animationName === 'descslidein') {
                animationBox.style.display = 'block';
                animationBox.classList.remove('descslidein');
                startDescAnimation();
            }
        }
        setTimeout(()=> {
            startDescAnimation();
      }
      ,1000);

    });
    function randomdesc() {
    const array = [
    "LOLOLOLOLOLOLOLOL",
    "Are you sure about that?",
    "Hello user, this is the website speaking!",
    "We are going to need a bigger boat.",
    "If you came here for a study guide, you should leave.",
    "Definitely not clickbait!",
    "Have you done your homework? Didn't think so.",
    "Yep, you found it.",
    "Made in England!",
    "Thatoneham is a holy man",
    "If two witches had two watches, which witch would be looking at which watch?",
    "<-- i love arrows -->",
    "Road work ahead? Uh yea, I sure hope it does.",
    "Salute Max and Bailey. They did TASSSOOOMMMAAAIII and contributed game suggestions. 🫡",
    "If RoBeats is too hard for you, I think that's a skill issue. (I'm taking to you Connar)",
    "Hi Logan!",
    "im getting paid with gum, worth it",
    "You can submit ideas in the q/a page!",
    "always listening...",
    "dont try beef noodles from canteen, i tried twice",
    "spanish is useless, change my mind",
    "who ever asked for bloxrob can keep dreaming",
    "if i get pulled out of lesson for this website,🙈 🙉 🙊",
    "We're back! Did you miss us?",
    "Now with tab cloaker!"
    ];
    const randomIndex = Math.floor(Math.random() * array.length);

    document.getElementById("desc").textContent = array[randomIndex];
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/random_bg.js"></script>
    <!-- Load Bootstrap JS -->
    <div class="News" id="CardBox">
      <center><h1 style="font-size: 3vw;"> news <span class="badge text-bg-warning"></span> </h1></center>
      <button class="closebt" onclick="toggleNews()">X</button> 
      </center>   
      <iframe src="news.html" width="100%" height="91%" style="border-radius: 1vh;" > </iframe>
    </div>
  <script>
      var NewsOpen = true;

      function toggleNews() {
          var Card = document.getElementById('CardBox');
          if (NewsOpen) {
              Card.classList.remove('fadeOutAnimation');
              Card.style.display = 'block';
              Card.classList.add('fadeInAnimation');
          } else {
              Card.classList.remove('fadeInAnimation');
              Card.classList.add('fadeOutAnimation');
          }
          NewsOpen = !NewsOpen;
      }
      var SettingOpen = true;

    function toggleSettings() {
        var Card = document.getElementById('settings-box');
        if (SettingOpen) {
            Card.classList.remove('SettingsFadeOutAnimation');
            Card.style.display = 'block'; 
            Card.classList.add('SettingsFadeInAnimation');
        } else {
            Card.classList.remove('SettingsFadeInAnimation');
            Card.classList.add('SettingsFadeOutAnimation');
        }
        SettingOpen = !SettingOpen;
    }
  </script>
    <div class="text-center" id="loader">
        <img src="assets/img/loader.gif" alt="Loader">
        <p class="loader-text">Loading...</p>
    </div>
    <center>
    <div class="mainbox" id="main-panel">
        <div class="mainbox-top-margin">
        </div>
        <div class="container">
            <div class="row row-cols-3" id="itembox">
            </div>
        </div>
    </div>
    </center>
    
    <script src="assets/js/renderlist.js" defer></script>
    <script>

      function openFrame(url) {
        optimizeForIframe()
        var Card = document.getElementById('iframe-box');
        var iframe = document.getElementById('frame-main');
        Card.style.display = 'block';
        Card.classList.remove('FrameFadeInAnimation');
        Card.classList.add('FrameFadeOutAnimation');
        Card.classList.remove('FrameFadeOutAnimation');
        Card.classList.add('FrameFadeInAnimation');
        iframe.src = url;
      }
      document.addEventListener('DOMContentLoaded', function () {
        const switchElement = document.getElementById('redirectswitch');
        switchElement.checked = localStorage.getItem('redirect') === 'true';
        var Card = document.getElementById('iframe-box');
        Card.classList.remove('FrameFadeInAnimation');
        Card.classList.add('FrameFadeOutAnimation');
        Card.style.display = 'none';
      });
    </script>
    <div class="text-center bottom-text" style="height:auto;">
        <p style="font-size: 1.5vw;" >JustStudy CE is proudly ad-free and open source! Get the source code and host yourself on <a style="font-size: 1.5vw;" href="https://github.com/JustStudy-CE/juststudy-ce">𝔾𝕚𝕥𝕙𝕦𝕓</a>.</p>
        <p style="font-size: 1.5vw;">Join our <a style="font-size: 1.5vw;" href="assets/img/qr.png">𝔻𝕚𝕤𝕔𝕠𝕣𝕕 𝕤𝕖𝕣𝕧𝕖𝕣</a>!</p>
        <p style="font-size: 1.5vw;">Hit counter:</p>
        <a href="https://www.freecounterstat.com" title="website counter"><img src="https://counter6.optistats.ovh/private/freecounterstat.php?c=e7q6e6dd17hut31lkgpqpjpzlrbjlbgt" border="0" title="website counter" alt="website counter"></a>
    </div>
  </body>
</html>
